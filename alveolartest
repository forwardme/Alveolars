import matplotlib.pyplot as plt


class one_alveolar:
  def __init__ (self, impedance, VoltoP, timestep, inpressure, initialvolume = 1):
    self.volume = initialvolume
    self.impedance = impedance
    self.inpressure = inpressure
    self.isin = True
    self.VoltoP = VoltoP
    self.timestep = timestep
    
  def update(self):
    self.alvp = self.VoltoP(self.volume)
    self.flowvelo = (self.inpressure - self.alvp)/self.impedance
    deltavol = self.flowvelo*self.timestep
    self.volume += deltavol
    
    if abs(deltavol) < 0.02:
      if self.isin == True:
        self.isin = False
        self.savedP = self.inpressure
        self.inpressure = 0
      else:
        self.isn = True
        self.inpressure = self.savedP

def VolP(vol):
	return vol*0.85


alv = one_alveolar(1,VolP,2,10)

ycoor = []
for i in range(100):
	ycoor.append(alv.volume)
	alv.update()

plt.plot(range(100),ycoor)
plt.show()
